
<div class="container">

  <div class="row">
    <div class="form-group field">
      <%= form_with(model: @live, remote: true) do |f| %>
        <div class="form-inputs">
          <h1><%= current_user.band.band_name%></h1>
          <div class="form-group">
            <%= f.label :live_name, "Live名", class: "form-control-label"%>
            <div class="input-group" data-target-input="nearest">
              <%= f.text_field :live_name, class: "form-control"%>
            </div>
          </div>

          <%= link_to "calendar",edit_live_house_path, remote: true, class: "btn btn-lg, btn-primary" %>

          <div class="modal fade" id="new_live">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">New live</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div id="calendar"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <%= f.hidden_field :live_house_id, :value => @live_house.id %>
          </div>

          <div class="form-group">
            <%= f.label :start_at, "開始時間", class: "form-control-label"%>
            <div class="input-group" data-target-input="nearest">
              <%= f.text_field :start_at, class: "form-control input-start"%>
            </div>
          </div>

          <div class="form-group">
            <%= f.label :end_at, "終了時間", class: "form-control-label"%>
            <div class="input-group" data-target-input="nearest">
              <%= f.text_field :end_at, class: "form-control input-end"%>
            </div>
          </div>

          <div class="form-group">
            <%= f.label :amount, "募集バンド数", class: "form-control-label"%>
            <div class="input-group" data-target-input="nearest">
              <%= f.select :amount, options_for_select(2..10), class:"form-control" %>
            </div>
          </div>

          <div class="form-group">
              <%= f.label :introduction, "ライブ詳細", class: "form-control-label"%>
            <div class="input-group" data-target-input="nearest">
              <%= f.text_area :introduction , class:"form-control" %>
            </div>
          </div>

        </div>

        <div class="modal-footer actions">
          <%= f.submit "入力完了", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>



  <div class="row">

    <div class="col-sm-4">
      <table>
        <tbody>
          <tr>
            <td>Website</td>
            <td><%= link_to @live_house.website,@live_house.website %></td>
          </tr>
          <tr>
            <td>Price</td>
            <td><%= @live_house.price%></td>
          </tr>
          <tr>
            <td>Postal Code</td>
            <td><%= @live_house.postal_code%></td>
          </tr>
          <tr>
            <td>Address</td>
            <td><%= @live_house.address%></td>
          </tr>
          <tr>
            <td>TELL</td>
            <td><%= @live_house.telephone_number%></td>
          </tr>
          <tr>
            <td>Detail</td>
            <td><%= @live_house.detail%></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-sm-4">
      <%= attachment_image_tag @live_house, :image, size: "300x300", fallback: "no_image.png", size: "300x300"%>
    </div>
    <div id='map' class="col-sm-4"></div>

  </div>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBYghblosto1WOuW2btc0E9GpvmpNtGM7E&callback=initMap" async defer></script>
  <script>
  let map
  function initMap(){
    const geocoder = new google.maps.Geocoder()

    const map = new google.maps.Map(document.getElementById('map'), {
      //latが緯度、lngが経度を示します
      center: {
        lat: <%= @live_house.latitude %>,
        lng: <%= @live_house.longitude %>
      },
      //数値は0〜21まで指定できます。数値が大きいほど拡大されます
      zoom: 12,
    });
    //positionに指定した座標にピンを表示させます
    const marker = new google.maps.Marker({
      position:  {
        lat: <%= @live_house.latitude %>,
        lng: <%= @live_house.longitude %>
      },
      map: map
    });
  }

  </script>

  </div>
</div>